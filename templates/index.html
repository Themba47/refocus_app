<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6X3S34VP83"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6X3S34VP83');
</script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Refocus Realign guides you in identifying your goals and developing a path to success. Dive deep with goal-focused questions to unlock your full potential and create a system to achieve what matters most.">
  <meta name="keywords" content="Self-discovery platform, Personal goals, Find focus, Goal achievement, Clarity and success, Growth mindset, Motivation tools">
   <meta property="og:title" content="Refocus Realign: Gain Clarity, Set Goals, Achieve Success">
  <meta property="og:image" content="https://www.bigcanvas.co.za/img/whatsappposter.jpg">
  <meta property="og:url" content="bit.ly/4aCanV5">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#111f3b"/>
    <title>Refocus Realign: Set Intentions, Define Goals, Live with Purpose</title>
    <style>
        /* Basic reset for a cleaner look */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: url(static/img/sky.jpg);
            background-size: cover;
            background-color: #000;
            color: #333;
        }
        
        header {
            width: 100%;
            padding: 10px;
            color: white;
            text-align: center;
        }
        
        .container {
            width: 100%;
            height: 75vh;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Main content styling */
        main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Ad section styling */
        .ad-container {
            margin: 20px 0;
            padding: 10px;
            width: 100%;
            max-width: 728px;
            text-align: center;
            border: 1px dashed #ddd;
            background-color: #fafafa;
        }

        /* Question content styling */
        .questionnaire {
            background-color: #030a2191;
            border-radius: 5px;
            text-align: center;
            width: 100%;
            margin-bottom: 20px;
        }

        .question {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            color: #fff;
            
        }

        .answer-input {
            background-color: #ffffff0d;
            border: 1px solid #ffffff;
            color: #fff;
            width: 300px;
            height: 25px;
            padding: 1%;
            border-radius: 5px;
        }

        .answer-textarea {
            background-color: #ffffff0d;
            border: 1px solid #fff;
            color: #fff;
            padding: 1%;
            border-radius: 5px;
        }

        #progress-bar-div {
            background-color: #f4f4f93d;
            border-radius: 50px;
            margin: 10px 0;
            display: none;
            height: 2px;
            width: 50%;
        }

        #progress-bar {
            box-shadow: 0px 0px 10px 8px #529affe6;
            background-color: #2561b5;
            border: .1px solid #fff;
            border-radius: 50px;
            height: 100%;
            width: 0;
        }

        .btn, #submit_qtns {
            font-size: large;
            background-color: #3a4aff;
            border-radius: 20px;
            border: none;
            color: #fff;
            margin: 2%;
            padding: 2%;
        }

        .question p a {
            color: #ffffff;
            text-decoration: underline;
        }

        #downloadPdf {
            font-size: large;
            background-color: #149b07;
            width: 300px;
            border-radius: 20px;
            border: none;
            color: #fff;
            margin: 2%;
            padding: 2%;
        }

        /* Styling for responsive design */
        @media (min-width: 768px) {
            .container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }
        
        footer {
            width: 100%;
            padding: 10px;
            text-align: center;
            background-color: #333;
            color: white;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Refocus Realign</h1>
        <p>Find Your Next Steps</p>
    </header>

    <div class="container">
        <!-- Top AdSense Banner Ad -->
        <!-- <section class="ad-container">
            <p>Top Banner Ad Placeholder (728x90)</p>
        </section> -->

        
        <!-- Main content area for questions -->
        <main>
            <section class="questionnaire">
                
                <!-- In-content AdSense ad -->
                <!-- <div class="ad-container">
                    <p>In-Content Ad Placeholder (300x250)</p>
                </div> -->
                
            </section>
            
            <!-- Bottom AdSense Ad (Responsive) -->
            <!-- <section class="ad-container">
                <p>Bottom Ad Placeholder (Responsive)</p>
            </section> -->
        </main>
        <div id="progress-bar-div">
            <div id="progress-bar"></div>
        </div>
    </div>

    <footer>
        <p>Â© 2024 Refocus Realign - All Rights Reserved</p>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // JavaScript for dynamically adding questions, if needed
        let questions = [];
		  {% for qtn in questions %}
		  	questions.push({{ qtn | tojson }});
		  {% endfor %}

		  let questionHolder = [],
          progress_bar = document.getElementById("progress-bar"),
          qtn_and_answer = {},
          ai_response = null,
          switchonProgress = false;

        const questionnaireDiv = document.querySelector('.questionnaire');

        function call_last_div() {
            let questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
			questionDiv.setAttribute('id', 'question_submit')
            questionDiv.innerHTML = `<p>Please enter email to get a summary of your answers</p>`;
            questionDiv.innerHTML += `<br><input class="email answer-input" type="email" id="email">`
            questionDiv.innerHTML += `<br><button type="button" onclick="submitQtns('user_email')" id="submit_qtns">Submit</button>`
            questionnaireDiv.appendChild(questionDiv);
        }

        function createPDFWithStyledParagraph(para) {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            const paragraph = para;

            pdf.setFont("times", "normal");
            pdf.setFontSize(12);

            const maxWidth = 180;
            const textLines = pdf.splitTextToSize(paragraph, maxWidth);

            pdf.text(textLines, 10, 10);

            pdf.save("refocus-realign.pdf");
        }

        function downloadAiPdf() {
            createPDFWithStyledParagraph(ai_response)
            questionnaireDiv.innerHTML = '<div class="question"><p>Looking to implement a survey<br> like this one with AI capabilities like text extraction and form summary <br>into your organisation lets get in touch. <a href="https://www.moloai.com/ai-survey">here</a></p></div>'
        }

        function getNextQtn(index) {
            if(document.querySelector('.answer').value.length > 0) {
                qtn_and_answer[document.querySelector('.question').innerText] = document.querySelector('.answer').value; 
                questionnaireDiv.innerHTML = ''
                let progress = Math.round((index+1) / questionHolder.length * 100);
                if(!switchonProgress) {
                    document.getElementById('progress-bar-div').style.display = 'block'
                    switchonProgress = true;
                }
                progress_bar.style.width = progress + '%'
                if(index == questionHolder.length - 1) {
                    call_last_div();
                    console.log(qtn_and_answer)
                } else {
                    questionnaireDiv.append(questionHolder[index])
                }
            }
        }

        function submitQtns(key) {
            qtn_and_answer[key] = document.querySelector('#email').value;
            options = {
                method: "POST",
                headers: {
                // "X-CSRFToken": document.querySelector("input[name=csrfmiddlewaretoken]").value
                },
                body: JSON.stringify(qtn_and_answer)
            }
            fetch("../", options)
            .then((res) => res.json())
            .then((data) => {
                ai_response = data.result
                // Add loader animation delay so it looks like there is a delay
                questionnaireDiv.innerHTML = '<button id="downloadPdf" onclick="downloadAiPdf()">Download Response</button>'
            }).catch(console.error);
            
        }

        questions.forEach((questionText, index) => {
            let questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
				questionDiv.setAttribute('id', `question_${index+1}`)
            questionDiv.innerHTML = `<p>${index + 1}. ${questionText['question']}</p>`;

            if(questionText['type'] == 'input') {
                questionDiv.innerHTML += `<br><input class="answer answer-input" type="text" id="answer_${index+1}">`
            }
            if(questionText['type'] == 'textarea') {
                questionDiv.innerHTML += `<br><textarea cols="40" rows="8" class="answer answer-textarea" id="answer_${index+1}"></textarea>`
            }
            questionDiv.innerHTML += `<br><button onclick="getNextQtn(${index})" class="btn" id="btn_${index+1}">Enter</button>`
            if(index == 0) {
                questionnaireDiv.appendChild(questionDiv);
            }else {
                questionHolder.push(questionDiv)
            }
        });
    </script>
</body>
</html>
